"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[920],{6713:function(e,n,t){t.d(n,{EC:function(){return u},Ru:function(){return c},le:function(){return p},vw:function(){return s}});var r=t(5861),o=t(4687),a=t.n(o),i=t(5294);i.Z.defaults.baseURL="https://66430a433c01a059ea213b70.mockapi.io/api";var s=function(){var e=(0,r.Z)(a().mark((function e(n,t){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("/events",i.Z.defaults.baseURL),n&&r.searchParams.append("page",n),r.searchParams.append("limit",40),t&&r.searchParams.append("sortBy",t),e.prev=4,e.next=7,i.Z.get(r.toString());case 7:return o=e.sent,e.abrupt("return",o.data);case 11:throw e.prev=11,e.t0=e.catch(4),console.error("Failed to fetch events:",e.t0.message),e.t0;case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(n,t){return e.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)(a().mark((function e(){var n,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("/users",i.Z.defaults.baseURL),e.prev=1,e.next=4,i.Z.get(n.toString());case 4:return t=e.sent,e.abrupt("return",t.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Failed to fetch users:",e.t0.message),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)(a().mark((function e(n){var t,r,o,s,c,u,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.fullName,r=n.email,o=n.dateOfBirth,s=n.whereHeard,c=n.event,u=new URL("/users",i.Z.defaults.baseURL),e.prev=2,e.next=5,i.Z.post(u.toString(),{fullName:t,email:r,dateOfBirth:o,whereHeard:s,event:c});case 5:return p=e.sent,e.abrupt("return",p.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.error("Failed to fetch users:",e.t0.message),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(a().mark((function e(n,t){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("/users/".concat(n),i.Z.defaults.baseURL),e.prev=1,e.next=4,i.Z.put(r.toString(),{event:t});case 4:return o=e.sent,e.abrupt("return",o.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.error("Failed to fetch users:",e.t0.message),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n,t){return e.apply(this,arguments)}}()},2920:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r,o,a,i,s,c,u,p,l,d,f,h,x,v,g,Z,w,m=t(7762),b=t(3433),k=t(5861),j=t(9439),y=t(168),N=t(4687),z=t.n(N),P=t(5294),S=t(2791),E=t(1087),L=t(7689),I=t(6487),R=t(6713),T=I.ZP.div(r||(r=(0,y.Z)(["\n  padding-top: 55px;\n  background-color: white;\n"]))),U=I.ZP.div(o||(o=(0,y.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 40px;\n  justify-content: center;\n  padding-top: 90px;\n"]))),Y=I.ZP.div(a||(a=(0,y.Z)(["\n  border: 1px solid black;\n  width: 290px;\n  padding: 16px;\n"]))),C=I.ZP.div(i||(i=(0,y.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]))),J=I.ZP.h1(s||(s=(0,y.Z)(["\n  left: 420px;\n  top: 400px;\n  font-size: 24px;\n  margin: 0;\n"]))),M=I.ZP.h2(c||(c=(0,y.Z)([""]))),F=I.ZP.p(u||(u=(0,y.Z)(["\n  margin-bottom: 50px;\n"]))),O=I.ZP.section(p||(p=(0,y.Z)([""]))),D=(I.ZP.div(l||(l=(0,y.Z)(["\n  margin-top: 30px;\n  text-align: center;\n  padding-bottom: 80px;\n"]))),I.ZP.button(d||(d=(0,y.Z)(["\n  padding: 5px 10px;\n  margin: 0 5px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n\n  background-color: #3470ff;\n  color: #ffffff;\n  cursor: pointer;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &:hover:not(:disabled) {\n    background-color: #0b44cd;\n  }\n"]))),I.ZP.span(f||(f=(0,y.Z)(["\n  margin: 0 10px;\n"]))),I.ZP.button(h||(h=(0,y.Z)(["\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 1.43;\n  /* line-height: 143%; */\n  border-radius: 5px;\n\n  width: 136px;\n  height: 48px;\n  background-color: #3470ff;\n  color: #ffffff;\n  &:hover,\n  &:focus {\n    background-color: #0b44cd;\n  }\n"])))),_=I.ZP.div(x||(x=(0,y.Z)(["\n  display: flex;\n  padding-right: 460px;\n\n  background-color: rgba(255, 255, 255, 0.9);\n  gap: 200px;\n  align-items: center;\n  padding-left: 10px;\n  padding-bottom: 20px;\n  padding-top: 20px;\n"]))),V=I.ZP.div(v||(v=(0,y.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 50px;\n"]))),G=(I.ZP.button(g||(g=(0,y.Z)(["\n  position: fixed;\n  bottom: 40px;\n  right: 40px;\n  display: ",";\n  background-color: #3470ff;\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  cursor: pointer;\n  font-size: 24px;\n  line-height: 50px;\n  text-align: center;\n  z-index: 1000;\n"])),(function(e){return e.visible?"block":"none"})),function(){var e=(0,k.Z)(z().mark((function e(){var n,t,r,o;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,t=n.toISOString().split("T")[0],r="".concat("https://api.eventyay.com/v1","/events"),(new URLSearchParams).append("location-name","Vienna"),e.prev=5,e.next=8,P.Z.get(r,{headers:{Authorization:"JWT ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE3MTY2NjMxNDksIm5iZiI6MTcxNjY2MzE0OSwianRpIjoiNzRjMGRkYTgtNjE0My00ODAyLTg0ZWItYjQyY2IzODcxZTM3IiwiZXhwIjoxNzE2NzQ5NTQ5LCJpZGVudGl0eSI6MzcwMTQsImZyZXNoIjp0cnVlLCJ0eXBlIjoiYWNjZXNzIiwiY3NyZiI6ImVhNGVkNzgyLWFlY2EtNDEwZi1iMDY1LWI2YmJhNmMzYzk3OCJ9.eogha1Da36F_5zA7BfAvUTD1kxxljGSU7m_qLva0Fco")},params:{"filter[starts_at][gte]":t}});case 8:return o=e.sent,e.abrupt("return",o.data.data);case 12:throw e.prev=12,e.t0=e.catch(5),e.t0.response?console.error("Response error:",e.t0.response.data):e.t0.request?console.error("Request error:",e.t0.request):console.error("Error",e.t0.message),e.t0;case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(){return e.apply(this,arguments)}}()),Q=t(184),X=(0,I.ZP)(E.rU)(Z||(Z=(0,y.Z)(["\n  color: #3470ff;\n  font-weight: 600;\n\n  &:hover {\n    color: #0b44cd;\n  }\n\n  &:focus {\n    color: #0b44cd;\n  }\n"]))),A=I.ZP.button(w||(w=(0,y.Z)(["\n  position: fixed;\n  bottom: 40px;\n  right: 40px;\n  display: ",";\n  background-color: #3470ff;\n  color: white;\n  border: none;\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  cursor: pointer;\n  font-size: 24px;\n  line-height: 50px;\n  text-align: center;\n  z-index: 1000;\n"])),(function(e){return e.$visible?"block":"none"})),B=function(){var e=(0,L.TH)(),n=(0,S.useState)([]),t=(0,j.Z)(n,2),r=t[0],o=t[1],a=(0,S.useState)(1),i=(0,j.Z)(a,2),s=i[0],c=i[1],u=(0,S.useState)(""),p=(0,j.Z)(u,2),l=p[0],d=p[1],f=(0,S.useState)(!1),h=(0,j.Z)(f,2),x=h[0],v=h[1],g=(0,S.useState)(!1),Z=(0,j.Z)(g,2),w=Z[0],y=Z[1],N=(0,S.useState)(!0),E=(0,j.Z)(N,2),I=E[0],B=E[1],H=(0,S.useState)(!1),W=(0,j.Z)(H,2),q=W[0],$=W[1],K=(0,S.useState)(!1),ee=(0,j.Z)(K,2),ne=ee[0],te=ee[1],re=function(){var e=(0,k.Z)(z().mark((function e(n,t){var r,a,i=arguments;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],y(!0),e.prev=2,e.next=5,(0,R.vw)(n,t);case 5:(a=e.sent).length>0?o((function(e){return r?a:[].concat((0,b.Z)(e),(0,b.Z)(a))})):B(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.message);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n,t){return e.apply(this,arguments)}}(),oe=function(){var e=(0,k.Z)(z().mark((function e(n){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.Z.post("https://66430a433c01a059ea213b70.mockapi.io/api/events",n);case 3:t=e.sent,console.log("Event added:",t.data),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.error("Error adding event:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,k.Z)(z().mark((function e(){var n,t,o,a,i;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G();case 3:n=e.sent,console.log("Fetched events:",n),t=(0,m.Z)(n),e.prev=6,t.s();case 8:if((o=t.n()).done){e.next=17;break}return a=o.value,console.log("event.id",a.id),console.log("events",r),i={title:a.attributes.name,description:a.attributes["location-name"],eventdate:new Date(a.attributes["starts-at"]).getTime(),organizer:a.attributes["owner-name"],id_event:a.id,id:a.id},e.next=15,oe(i);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),t.e(e.t0);case 22:return e.prev=22,t.f(),e.finish(22);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(0),console.error("Error fetching events:",e.t1);case 30:case"end":return e.stop()}}),e,null,[[0,27],[6,19,22,25]])})));return function(){return e.apply(this,arguments)}}();(0,S.useEffect)((function(){ae()}),[]),(0,S.useEffect)((function(){var e=function(){var e=(0,k.Z)(z().mark((function e(){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o([]),c(1),B(!0),e.next=5,re(1,l,!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[l,x]),(0,S.useEffect)((function(){var e=function(){window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-100&&!w&&I&&c((function(e){return e+1})),window.scrollY>100?te(!0):te(!1),window.scrollY>300?$(!0):$(!1)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[w,I]),(0,S.useEffect)((function(){s>1&&re(s,l)}),[s]);return(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsxs)(O,{children:[(0,Q.jsx)(T,{children:(0,Q.jsxs)(_,{style:{position:"fixed"},className:ne?"scrolled":"",children:[(0,Q.jsxs)(V,{children:[(0,Q.jsx)(J,{children:"Events"}),(0,Q.jsx)(D,{onClick:function(){d("title")},children:"Sort by title"}),(0,Q.jsx)(D,{onClick:function(){d("eventdate")},children:"Sort by event date"}),(0,Q.jsx)(D,{onClick:function(){d("organizer")},children:"Sort by organizer"})]}),(0,Q.jsx)(D,{onClick:function(){v((function(e){return!e})),d("")},children:"Reset Filters"})]})}),(0,Q.jsxs)(U,{className:"css.events",children:[r&&r.length>0?r.map((function(n,t){return(0,Q.jsxs)(Y,{className:"css.event_div",children:[(0,Q.jsx)(M,{children:n.title}),(0,Q.jsx)(F,{children:n.description}),(0,Q.jsxs)(C,{children:[(0,Q.jsx)(X,{to:"/register/".concat(n.id),state:{from:e,title:n.title},children:"Register"}),(0,Q.jsx)(X,{to:"/view/".concat(n.id),state:{from:e,title:n.title},children:"View"})]})]},t)})):(0,Q.jsx)("p",{children:"No events found"}),w&&(0,Q.jsx)("p",{children:"Loading more events..."})]}),(0,Q.jsx)(A,{$visible:q,onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:"\u2191"})]})})}}}]);
//# sourceMappingURL=920.1e50d2b2.chunk.js.map